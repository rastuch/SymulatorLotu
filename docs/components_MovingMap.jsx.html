<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: components/MovingMap.jsx</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: components/MovingMap.jsx</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>import React, {useEffect, useRef} from 'react';
import * as THREE from 'three';
import {GLTFLoader} from 'three/examples/jsm/loaders/GLTFLoader.js';
import {WebGL} from 'three/examples/jsm/Addons.js';
import initSky from '../tools/initSky.js';
import initClouds from '../tools/initClouds.js';

/**
 * MovingMap component that initializes and renders a 3D moving map using Three.js.
 *
 * @component
 * @returns {JSX.Element} The MovingMap component.
 */
const MovingMap = () => {
  const containerRef = useRef(null);

  useEffect(() => {
    let jet, sky, sun, mixer;

    if (WebGL.isWebGLAvailable()) {
      console.log('WebGL is available!');
    } else {
      const warning = WebGL.getWebGLErrorMessage();
      containerRef.current.appendChild(warning);
      return;
    }

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 5;
    camera.position.y = 1;

    const renderer = new THREE.WebGLRenderer();
    renderer.setSize(window.innerWidth, window.innerHeight);
    containerRef.current.appendChild(renderer.domElement);

    const loader = new GLTFLoader();
    const textureLoader = new THREE.TextureLoader();

    const light = new THREE.DirectionalLight(0xffffff, 10.0);
    light.position.set(3.14, 1, 1);
    scene.add(light);

    scene.add(new THREE.AmbientLight(0xeef0ff, 0.2));

    const cloudTexture = textureLoader.load('src/models/cloudd.png');
    cloudTexture.colorSpace = THREE.SRGBColorSpace;
    cloudTexture.anisotropy = renderer.capabilities.getMaxAnisotropy();
    cloudTexture.wrapS = cloudTexture.wrapT = THREE.RepeatWrapping;

    initClouds(scene, cloudTexture);

    loader.load('src/models/mig29c.glb', function (gltf) {
      jet = gltf.scene;
      jet.scale.set(0.005, 0.005, 0.005);
      jet.position.z = 0;
      jet.rotation.y = Math.PI;

      if (gltf.animations &amp;&amp; gltf.animations.length) {
        mixer = new THREE.AnimationMixer(gltf.scene);
        gltf.animations.forEach((clip) => {
          mixer.clipAction(clip).play();
        });
      }

      scene.add(jet);

      loader.load('src/models/doublemount.glb', function (gltf) {
        const mountainModel = gltf.scene;
        mountainModel.scale.set(1, 1, 1);

        initSky(renderer, scene, camera, sky, sun);
      });
    });

    /**
     * Animation loop for rendering the scene.
     */
    const animate = () => {
      requestAnimationFrame(animate);
      const delta = new THREE.Clock().getDelta();

      if (mixer) {
        mixer.update(delta);
      }

      cloudTexture.offset.y += 0.01;
      renderer.render(scene, camera);
    };

    animate();

    return () => {
      if (containerRef.current) {
        while (containerRef.current.firstChild) {
          containerRef.current.removeChild(containerRef.current.firstChild);
        }
      }
    };
  }, []);

  return &lt;div ref={containerRef} className="moving-map-container"/>;
};

export default MovingMap;
</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Global</h3><ul><li><a href="global.html#App">App</a></li><li><a href="global.html#ButtonFly">ButtonFly</a></li><li><a href="global.html#Game">Game</a></li><li><a href="global.html#Menu">Menu</a></li><li><a href="global.html#MovingMap">MovingMap</a></li><li><a href="global.html#addLightsToScene">addLightsToScene</a></li><li><a href="global.html#createBuildings">createBuildings</a></li><li><a href="global.html#createRaycasters">createRaycasters</a></li><li><a href="global.html#createTower">createTower</a></li><li><a href="global.html#formatDate">formatDate</a></li><li><a href="global.html#initCamera">initCamera</a></li><li><a href="global.html#initClouds">initClouds</a></li><li><a href="global.html#initGame">initGame</a></li><li><a href="global.html#initSky">initSky</a></li><li><a href="global.html#initializeGame">initializeGame</a></li><li><a href="global.html#jetControllers">jetControllers</a></li><li><a href="global.html#loadAndSetCloudTexture">loadAndSetCloudTexture</a></li><li><a href="global.html#onPressNext">onPressNext</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc/jsdoc">JSDoc 4.0.3</a> on Thu Jun 13 2024 14:19:08 GMT+0200 (Central European Summer Time)
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>
